(function(l){var t=l.merge,v=l.isArray,w=l.Axis.prototype.addAxisPane,u=l.Axis.prototype.maxInArray;Indicator.prototype.atr={getDefaultOptions:function(){return{period:14,approximation:"average"}},getValues:function(e,a,c,d){e=this.utils;var h=c.params.period,g=d[0].concat(a.processedXData||[]);d=(a=d[1].concat(a.processedYData||[]))?a.length:0;var q=1,f=0,n=0,k=[],l=[],r=[],m,b,p;p=[[g[0],a[0]]];if(!(g.length<=h)){if(!v(a[0]))for(b=0;b<d;b++)a[b]=[a[b],a[b]+1,a[b]-1,a[b]];else if(4!=a[0].length)for(b=
0;b<d;b++)a[b]=[a[b][0],a[b][0]+1,a[b][0]-1,a[b][0]];for(b=1;b<d;b++)e.accumulateAverage(p,g,a,b),h<q?(m=e.populateAverage(p,g,a,b,h,f),f=m[1],k.push(m),l.push(m[0]),r.push(m[1])):(h===q?(f=n/(b-1),k.push([g[b-1],f])):n+=e.getTR(a[b-1],a[b-2]),q++);m=e.populateAverage(p,g,a,b,h,f);l.push(m[0]);r.push(m[1]);k.push(m);c.yAxisMax=u(k);c.yAxisMin=0;return{values:k,xData:l,yData:r}}},getGraph:function(e,a,c,d){var h=[],g={};a=a.xAxis;var l=d.length,g=u(d),f,n,k;f={min:0,max:g,title:{text:"ATR"}};if(!1!==
c.visible){f=t(f,c.yAxis);void 0===c.Axis&&(f=w(e,f),c.Axis=e.yAxis[f],c.Axis.oldMax=g);f=c.Axis;c.styles=g=t({"stroke-width":2,stroke:"red",dashstyle:"Dash"},c.styles);h.push("M",a.toPixels(d[0][0]),f.toPixels(d[0][1]));for(k=0;k<l;k++)c=d[k][0],n=d[k][1],h.push("L",a.toPixels(c),f.toPixels(n));return[e.renderer.path(h).attr(g)]}},utils:{accumulateAverage:function(e,a,c,d){e.push([a[d],c[d]])},populateAverage:function(e,a,c,d,h,g){e=a[d-1];c=this.getTR(c[d-1],c[d-2]);return[e,(g*(h-1)+c)/h]},getTR:function(e,
a){return Math.max(e[1]-e[2],void 0===a?0:Math.abs(e[1]-a[3]),void 0===a?0:Math.abs(e[2]-a[3]))}}}})(Highcharts);