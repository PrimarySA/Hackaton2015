(function(m){function k(g,a){return parseFloat(g.toFixed(a))}var t=m.merge,w=m.isArray,x=m.Axis.prototype.addAxisPane;Indicator.prototype.rsi={getDefaultOptions:function(){return{period:14,overbought:70,oversold:30,approximation:"average",decimals:4}},getValues:function(g,a,c,f){g=this.utils;var e=c.params,h=e.period,u=f[0].concat(a.processedXData||[]);f=(a=f[1].concat(a.processedYData||[]))?a.length:0;var e=e.decimals,l=1,v=[],p=[],n=[],q=[],r=[],d,m;if(!(u.length<=h)){if(!w(a[0]))for(var b=0;b<
f;b++)a[b]=[a[b],a[b]+1,a[b]-1,a[b]];else if(4!=a[0].length)for(b=0;b<f;b++)a[b]=[a[b][0],a[b][0]+1,a[b][0]-1,a[b][0]];for(;l<h+1;)d=k(a[l][3]-a[l-1][3],e),q.push(0<d?d:0),r.push(0>d?Math.abs(d):0),l++;for(b=l-1;b<f;b++)b>l-1&&(q.shift(),r.shift(),d=k(a[b][3]-a[b-1][3],e),q.push(0<d?d:0),r.push(0>d?Math.abs(d):0)),d=k(g.sumArray(q)/h,e),m=k(g.sumArray(r)/h,e),d=0===m?100:k(d/m,e),d=k(100-100/(1+d),e),v.push([u[b],d]),p.push(u[b]),n.push(d);c.yAxisMax=100;c.yAxisMin=0;return{values:v,xData:p,yData:n}}},
getGraph:function(g,a,c,f){var e=[],h={};a=a.xAxis;var m=f.length,l,k,p,n,h={min:0,tickInterval:25,plotLines:[{value:c.params.overbought,color:"orange",width:1},{value:c.params.oversold,color:"orange",width:1}],max:100,title:{text:"RSI"}};if(!1!==c.visible){l=t(h,c.yAxis);void 0===c.Axis?(h=x(g,l),c.Axis=g.yAxis[h]):Highcharts.each(c.Axis.plotLinesAndBands,function(a,c){a.options=t(a.options,l.plotLines[c]);a.render()});k=c.Axis;c.styles=h=t({"stroke-width":2,stroke:"red",dashstyle:"Dash"},c.styles);
e.push("M",a.toPixels(f[0][0]),k.toPixels(f[0][1]));for(n=0;n<m;n++)c=f[n][0],p=f[n][1],e.push("L",a.toPixels(c),k.toPixels(p));return[g.renderer.path(e).attr(h)]}},utils:{sumArray:function(g){return g.reduce(function(a,c){return a+c})}}}})(Highcharts);